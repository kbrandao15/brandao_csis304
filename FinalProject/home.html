<html>
   <head>
      <title>Welcome to DisneyLand</title>
      <script type="text/javascript">

     // The URL we'll pull data from
     var theURL = "https://graphical.weather.gov/xml/sample_products/browser_interface/ndfdBrowserClientByDay.php?zipCodeList=97132&format=24+hourly&numDays=7";
      /**
      * A simple callback function to display some results from an
      * Ajax call. Note that 'this' in the context of the function will
      * be an XMLHttpRequest object at runtime
      */
     function setUpCallBack()
     {

        // If the request was successfull, put the response into
        // an area on the web page
        if (this.readyState==4 && this.status==200)
        {
         alert("in if");  
           // Creates a DOMParser and parses the response as XML and then grabs
           // some attributes (max/min temps, images, warnings) from the document
           parser = new DOMParser();
           xmlDoc=parser.parseFromString(this.responseText,"text/xml");
          document.getElementById("demo").innerHTML = this.responseText;  
           
           // attributes/elements grabbed from the XML
           var park1 = "disneyland";  
           var park2 = "disneys-california-adventure";  
           var filter = "attraction";  
           
           entities = xmlDoc.getElementsByTagName("ENTITY");  
           alert(entities.length);  
           for (var i = 0; i < entities.length; i++){
                   alert("entered loop!");  
               if (entities[i].getAttribute("map") !== 'undefined'){
                   alert("found an entity:"+entities[i].getAttribute("map").nodeValue);  
                                  
               }

           }
       }
     }

      /**
      * Generic function to make an asynchronous call to the given URL
      * and call the given function to process the results
      *
      * param url to retrieve
      * param callbackFunction to invoke when done retrieving
      */
     function makeAsynchRequest(url, setUpCallBack)
     {
         // code for IE7+, Firefox, Chrome, Opera, Safari
         if (window.XMLHttpRequest)
         {
            xmlhttp=new XMLHttpRequest();
         }
         else // code for IE6, IE5
         {
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
         }

         // Create an anonymous function as the "callback" function
         // to be executed when the request finishes
         xmlhttp.onreadystatechange=setUpCallBack;

         // Get the request, encoding the URL to ensure that any
         // parameters it includes do not confuse the proxy
         xmlhttp.open("GET","proxy.php?mode=native&url="+
               encodeURIComponent(url), true);
         xmlhttp.send();
     }

    </script>
  
 <body>Testing <div id = "demo"></div><script> makeAsynchRequest(theURL, setUpCallBack);  </script>
 </body>
</html>